DROP TABLE EMP_VAGA_HABILIDADE CASCADE CONSTRAINTS;
DROP TABLE EMP_PROFISSIONAL_HABILIDADE CASCADE CONSTRAINTS;
DROP TABLE EMP_AVALIACAO CASCADE CONSTRAINTS;
DROP TABLE EMP_VAGA CASCADE CONSTRAINTS;
DROP TABLE EMP_EMPRESA CASCADE CONSTRAINTS;
DROP TABLE EMP_PROFISSIONAL CASCADE CONSTRAINTS;
DROP TABLE EMP_HABILIDADE CASCADE CONSTRAINTS;
DROP TABLE EMP_CATEGORIA_HABILIDADE CASCADE CONSTRAINTS;
DROP TABLE EMP_USUARIO CASCADE CONSTRAINTS;
DROP TABLE EMP_CIDADE CASCADE CONSTRAINTS;


CREATE TABLE EMP_CIDADE (
    CIDADE_ID     NUMBER 
        GENERATED BY DEFAULT AS IDENTITY (START WITH 100 INCREMENT BY 1) PRIMARY KEY,
    CIDADE_NOME   VARCHAR2(100) NOT NULL
);

CREATE TABLE EMP_USUARIO (
    USUARIO_ID        NUMBER 
        GENERATED BY DEFAULT AS IDENTITY (START WITH 100 INCREMENT BY 1) PRIMARY KEY,
    USUARIO_NOME      VARCHAR2(100) NOT NULL,
    USUARIO_LOGIN     VARCHAR2(50) NOT NULL,
    USUARIO_SENHA     VARCHAR2(256),
    USUARIO_DESCRICAO VARCHAR2(200),
    USUARIO_FOTO      VARCHAR2(200),
    USUARIO_CONTATO   VARCHAR2(100),
    USUARIO_ENDERECO  VARCHAR2(100),
    USUARIO_CIDADE    NUMBER(10),
    CONSTRAINT FK_EMP_USUARIO_CIDADE
        FOREIGN KEY (USUARIO_CIDADE)
        REFERENCES EMP_CIDADE (CIDADE_ID)
);

CREATE TABLE EMP_CATEGORIA_HABILIDADE (
    CATEGORIA_ID     NUMBER 
        GENERATED BY DEFAULT AS IDENTITY (START WITH 100 INCREMENT BY 1) PRIMARY KEY,
    CATEGORIA_NOME   VARCHAR2(100) NOT NULL
);

CREATE TABLE EMP_HABILIDADE (
    HABILIDADE_ID        NUMBER 
        GENERATED BY DEFAULT AS IDENTITY (START WITH 100 INCREMENT BY 1) PRIMARY KEY,
    HABILIDADE_NOME      VARCHAR2(100) NOT NULL,
    HABILIDADE_CATEGORIA NUMBER(10),
    CONSTRAINT FK_EMP_HABILIDADE_CATEGORIA
        FOREIGN KEY (HABILIDADE_CATEGORIA)
        REFERENCES EMP_CATEGORIA_HABILIDADE (CATEGORIA_ID)
);

CREATE TABLE EMP_PROFISSIONAL (
    PROFISSIONAL_USUARIO_ID NUMBER PRIMARY KEY,
    PROFISSIONAL_EMPREGADO  CHAR(1) CHECK (PROFISSIONAL_EMPREGADO IN ('S','N')),
    PROFISSIONAL_ANOS_DE_SERV NUMBER(3),
    PROFISSIONAL_AVALIACOES  NUMBER(10),
    CONSTRAINT FK_EMP_PROFISSIONAL_USUARIO
        FOREIGN KEY (PROFISSIONAL_USUARIO_ID)
        REFERENCES EMP_USUARIO (USUARIO_ID)
);

CREATE TABLE EMP_PROFISSIONAL_HABILIDADE (
    PROFISSIONAL_USUARIO_ID NUMBER(10),
    HABILIDADE_ID           NUMBER(10),
    PRIMARY KEY (PROFISSIONAL_USUARIO_ID, HABILIDADE_ID),
    CONSTRAINT FK_EMP_PH_PROFISSIONAL
        FOREIGN KEY (PROFISSIONAL_USUARIO_ID)
        REFERENCES EMP_PROFISSIONAL (PROFISSIONAL_USUARIO_ID),
    CONSTRAINT FK_EMP_PH_HABILIDADE
        FOREIGN KEY (HABILIDADE_ID)
        REFERENCES EMP_HABILIDADE (HABILIDADE_ID)
);

CREATE TABLE EMP_EMPRESA (
    USUARIO_EMPRESA_ID NUMBER PRIMARY KEY,
    EMPRESA_WEBSITE    VARCHAR2(200),
    EMPRESA_NOTA_MEDIA NUMBER(5,2),
    CONSTRAINT FK_EMP_EMPRESA_USUARIO
        FOREIGN KEY (USUARIO_EMPRESA_ID)
        REFERENCES EMP_USUARIO (USUARIO_ID)
);

CREATE TABLE EMP_VAGA (
    VAGA_ID         NUMBER 
        GENERATED BY DEFAULT AS IDENTITY (START WITH 100 INCREMENT BY 1) PRIMARY KEY,
    VAGA_TITULO     VARCHAR2(100) NOT NULL,
    VAGA_DESCRICAO  VARCHAR2(500),
    VAGA_SALARIO    NUMBER(12,2),
    VAGA_EMPRESA    NUMBER(10) NOT NULL,
    VAGA_REMOTO     CHAR(1) CHECK (VAGA_REMOTO IN ('S','N')),
    VAGA_PRESENCIAL CHAR(1) CHECK (VAGA_PRESENCIAL IN ('S','N')),
    VAGA_PERIODO    VARCHAR2(50),
    VAGA_OCUPADA    CHAR(1) CHECK (VAGA_OCUPADA IN ('S','N')),
    VAGA_NOTA_MEDIA NUMBER(5,2),
    CONSTRAINT FK_EMP_VAGA_EMPRESA
        FOREIGN KEY (VAGA_EMPRESA)
        REFERENCES EMP_EMPRESA (USUARIO_EMPRESA_ID)
);

CREATE TABLE EMP_VAGA_HABILIDADE (
    VAGA_ID        NUMBER(10),
    HABILIDADE_ID  NUMBER(10),
    PRIMARY KEY (VAGA_ID, HABILIDADE_ID),
    CONSTRAINT FK_EMP_VH_VAGA
        FOREIGN KEY (VAGA_ID)
        REFERENCES EMP_VAGA (VAGA_ID),
    CONSTRAINT FK_EMP_VH_HABILIDADE
        FOREIGN KEY (HABILIDADE_ID)
        REFERENCES EMP_HABILIDADE (HABILIDADE_ID)
);

CREATE TABLE EMP_AVALIACAO (
    AVALIACAO_ID        NUMBER 
        GENERATED BY DEFAULT AS IDENTITY (START WITH 100 INCREMENT BY 1) PRIMARY KEY,
    AVALIACAO_DESCRICAO VARCHAR2(500),
    AVALIACAO_NOTA      NUMBER(5,2),
    AVALIACAO_VAGA      NUMBER(10),
    AVALIACAO_EMPRESA   NUMBER(10),
    CONSTRAINT FK_EMP_AVALIACAO_VAGA
        FOREIGN KEY (AVALIACAO_VAGA)
        REFERENCES EMP_VAGA (VAGA_ID),
    CONSTRAINT FK_EMP_AVALIACAO_EMPRESA
        FOREIGN KEY (AVALIACAO_EMPRESA)
        REFERENCES EMP_EMPRESA (USUARIO_EMPRESA_ID)
);
